## 测试文档

### 测试策略

**测试类型**：

- 单元测试：覆盖核心业务逻辑
- 集成测试：验证模块间协作
- 系统测试：端到端业务流程验证
- 性能测试：系统负载能力测试

### 测试环境

| 环境       | 用途     | 配置         |
| ---------- | -------- | ------------ |
| 开发环境   | 开发自测 | 本地部署     |
| 测试环境   | 集成测试 | 2C4G云服务器 |
| 预生产环境 | 系统测试 | 4C8G云服务器 |

### 测试用例

#### 预约功能测试用例

**用例1：正常预约流程**

text

```
前置条件：
1. 患者已注册并登录
2. 医生排班已发布
3. 号源充足

测试步骤：
1. 进入预约页面
2. 选择科室和医生
3. 选择可预约时间段
4. 确认预约信息
5. 完成支付

预期结果：
1. 页面跳转成功
2. 显示预约成功信息
3. 收到预约成功短信
4. 预约记录状态更新为"已预约"
```

**用例2：号源不足情况**

text

```
前置条件：
1. 患者已登录
2. 目标时间段号源为0

测试步骤：
1. 选择目标时间段
2. 尝试预约

预期结果：
1. 显示"号源已满"提示
2. 无法进行预约操作
```

**用例3：支付订单流程**

text

```
前置条件：
1. 患者已创建预约（状态为待支付）
2. 预约记录存在

测试步骤：
1. 进入"我的预约"页面
2. 找到待支付的预约
3. 点击支付按钮
4. 选择支付方式
5. 确认支付

预期结果：
1. 支付成功提示
2. 预约状态更新为"已完成"（绿色标签）
3. 操作列只显示"查看详情"按钮
4. 不再显示"修改预约"和"取消预约"按钮
```

**用例4：医生看病流程**

text

```
前置条件：
1. 医生已登录
2. 有患者预约记录
3. 医生已叫号

测试步骤：
1. 进入患者队列页面
2. 点击"看病"按钮
3. 填写诊断信息
4. 添加药品到处方
5. 提交诊断和处方

预期结果：
1. 病例创建成功
2. 处方创建成功
3. 患者可以查看病例和处方
4. 医生可以查看历史病例
```

**用例5：查看病例功能**

text

```
前置条件：
1. 医生已为患者创建病例
2. 患者已有预约记录

测试步骤（医生端）：
1. 进入患者队列页面
2. 找到已有病例的患者
3. 点击"查看病例"按钮

预期结果：
1. 显示患者基本信息
2. 显示病例详情（症状、诊断、医嘱）
3. 显示处方信息（药品列表、总金额）
4. 显示处方支付状态

测试步骤（患者端）：
1. 进入"我的预约"页面
2. 找到已有病例的预约
3. 点击"查看详情"按钮

预期结果：
1. 显示预约基本信息
2. 显示病例信息
3. 显示处方信息
4. 如果处方待支付，显示支付按钮
```

####  性能测试用例

**负载测试**

text

```
测试场景：高峰时段挂号
并发用户数：1000
测试时长：30分钟
预期指标：
- 响应时间 < 3秒
- 错误率 < 1%
- CPU使用率 < 80%
```

###  测试工具

| 测试类型   | 工具             | 用途         |
| ---------- | ---------------- | ------------ |
| 单元测试   | JUnit + Mockito  | Java代码测试 |
| 接口测试   | Postman + Newman | API接口测试  |
| 性能测试   | JMeter           | 负载压力测试 |
| 自动化测试 | Selenium         | Web界面测试  |

### 实际功能测试清单

#### 患者功能测试

- [x] 用户注册和登录
- [x] 智能导诊功能
- [x] 预约挂号功能
- [x] 查看预约记录
- [x] 取消预约功能
- [x] 修改预约功能
- [x] 支付挂号费
- [x] 查看病例和处方
- [x] 支付药品费
- [x] 合并订单支付
- [x] 查看个人信息
- [x] 查看诚信度信息

#### 医生功能测试

- [x] 医生登录
- [x] 查看个人信息和排班
- [x] 调班申请
- [x] 查看患者队列
- [x] 叫号功能
- [x] 看病开药（填写诊断、开具处方）
- [x] 查看历史病例

#### 管理员功能测试

- [x] 管理员登录
- [x] 医生信息管理（增删改查）
- [x] 患者信息管理（增删改查）
- [x] 科室信息管理（增删改查）
- [x] 诊室信息管理（增删改查）
- [x] 排班信息管理（增删改查）
- [x] 药品信息管理（增删改查、上架下架）
- [x] 调班申请审核
- [x] 数据统计分析